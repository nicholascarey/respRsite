<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A comparison of respR with other R packages • respR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="A comparison of respR with other R packages">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">respR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/respR.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">List of Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/importing.html">Importing your data</a>
    </li>
    <li>
      <a href="../articles/auto_rate.html">auto_rate: Automatic detection of linear rates</a>
    </li>
    <li>
      <a href="../articles/closed.html">Closed-chamber respirometry</a>
    </li>
    <li>
      <a href="../articles/intermittent.html">Intermittent-flow respirometry: Simple example</a>
    </li>
    <li>
      <a href="../articles/intermittent2.html">Intermittent-flow respirometry: Complex example</a>
    </li>
    <li>
      <a href="../articles/flowthrough.html">Flowthrough respirometry</a>
    </li>
    <li>
      <a href="../articles/pcrit.html">Pcrit analysis</a>
    </li>
    <li>
      <a href="../articles/twopoint.html">Two-point analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Discussion
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/auto_rate_performance.html">auto_rate: Performance in detecting linear regions</a>
    </li>
    <li>
      <a href="../articles/auto_rate_comp.html">auto_rate: Comparisons with LoLinR</a>
    </li>
    <li>
      <a href="../articles/packages_comp.html">respR: Comparisons with other R packages</a>
    </li>
    <li>
      <a href="../articles/tidyverse.html">respR: Integration with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/reproducibility.html">respR: Reporting reproducible analyses</a>
    </li>
    <li>
      <a href="../articles/usage.html">respR: When to use respR</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/januarharianto/respr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="packages_comp_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>A comparison of respR with other R packages</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/januarharianto/respr/blob/master/vignettes/packages_comp.Rmd"><code>vignettes/packages_comp.Rmd</code></a></small>
      <div class="hidden name"><code>packages_comp.Rmd</code></div>

    </div>

    
    
<p>We have designed <code>respR</code> to be able to explore, process and analyse any and all aquatic respirometry data, independent of the system or hardware used to collect it. In fact because of the unitless nature of the majority of functions in the package, other respirometry data, or indeed other time series data examining other variables can be analysed in <code>respR</code>.</p>
<p>There are only a couple of other <code>R</code> packages that are focused towards respirometry data analysis; <a href="https://cran.r-project.org/web/packages/rMR/index.html">rMR</a>, and <a href="https://fishresp.org">FishResp</a> (there is one other, <a href="https://cran.r-project.org/web/packages/respirometry/index.html">respirometry</a>, but it is not focussed on processing data). These packages have quite specific focuses; both <code>rMR</code> and <code>FishResp</code> are centered around processing intermittent-flow, swim tunnel respirometry data, in particular from Loligo Systems equipment. Neither has the universal focus of <code>respR</code>, and while it is sometimes possible to process other respirometry data using these packages it is far from straightforward. However, they are excellent packages within their own focuses and we would encourage users to explore them and how they work; they may contain functionality that suits your particular analyses or workflows better than <code>respR</code>.</p>
<p>Neither of these packages however are particularly analytical in nature; they lack any functionality similar to the <code><a href="../reference/auto_rate.html">auto_rate()</a></code> function in <code>respR</code>, which allows statistically robust, rapid, objective identification of linear segments in respirometry data. Only one package to our knowledge has a similar functionality; <a href="https://github.com/colin-olito/LoLinR">LoLinR</a> also seeks to identify linear regions in time-series data, although with no particular focus on respirometry. We compare the performance of <code><a href="../reference/auto_rate.html">auto_rate()</a></code> and <code>LoLinR</code> <a href="https://januarharianto.github.io/respR/articles/auto_rate_comp.html">here</a>.</p>
<p>The <code>rMR</code> and <code>FishResp</code> packages instead rely solely on manual selection of data regions in respirometry data from which to extract oxygen uptake rates. <code>respR</code> also has this functionality as an option, and in this vignette we briefly compare the outputs of these packages with <code>respR</code>, and other overlapping functionality.</p>
<div id="respr-and-respirometry" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-respirometry" class="anchor"></a><code>respR</code> and <code>respirometry</code>
</h2>
<p>The <a href="https://cran.r-project.org/web/packages/respirometry/index.html">respirometry</a> package by Matthew Birk has several useful utility functions for planning and conducting respirometry experiments. However, as the documentation states “Tools focus on helping the researcher setup and conduct experiments. Analysis of the resulting data is not a focus”. Therefore, this package has little in common with <code>respR</code>.</p>
<p>The only real functionality overlap with <code>respR</code> is the conversion function <code>conv_o2()</code>, similar to the <code><a href="../reference/convert_DO.html">convert_DO()</a></code> function in <code>respR</code>. Both support the same units, and because both functions rely on the unit standards package <code>marelac</code> they give identical or very similar results. Minor differences are probably dues to the precision with which variables are handled internally:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">## respR</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="../reference/convert_DO.html">convert_DO</a></span>(<span class="fl">7.9</span>, <span class="dt">from =</span> <span class="st">"mg/L"</span>, <span class="dt">to =</span> <span class="st">"umol/L"</span>, <span class="dt">t =</span> <span class="dv">25</span>, <span class="dt">S =</span> <span class="dv">35</span>, <span class="dt">P =</span> <span class="fl">1.01325</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#&gt; [1] 246.8843</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#&gt; </span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt;  Input unit: mg/L</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt; Output unit: umol/L</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">## respirometry</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">conv_o2</span>(<span class="dt">o2 =</span> <span class="fl">7.9</span>, <span class="dt">from =</span> <span class="st">"mg_per_l"</span>, <span class="dt">to =</span> <span class="st">"umol_per_l"</span>, <span class="dt">temp =</span> <span class="dv">25</span>, <span class="dt">sal =</span> <span class="dv">35</span>, <span class="dt">atm_pres =</span> <span class="fl">1013.25</span>)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#&gt; [1] 246.8843</span></span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">## respR</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="kw"><a href="../reference/convert_DO.html">convert_DO</a></span>(<span class="dv">85</span>, <span class="dt">from =</span> <span class="st">"%"</span>, <span class="dt">to =</span> <span class="st">"mL/L"</span>, <span class="dt">t =</span> <span class="dv">25</span>, <span class="dt">S =</span> <span class="dv">35</span>, <span class="dt">P =</span> <span class="fl">1.01325</span>)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="co">#&gt; [1] 4.383186</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">#&gt; </span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co">#&gt;  Input unit: %</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">#&gt; Output unit: mL/L</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">## respirometry</span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="kw">conv_o2</span>(<span class="dt">o2 =</span> <span class="dv">85</span>, <span class="dt">from =</span> <span class="st">"percent_a.s."</span>, <span class="dt">to =</span> <span class="st">"ml_per_l"</span>, <span class="dt">temp =</span> <span class="dv">25</span>, <span class="dt">sal =</span> <span class="dv">35</span>, <span class="dt">atm_pres =</span> <span class="fl">1013.25</span>)</span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="co">#&gt; [1] 4.393156</span></span></code></pre></div>
<p><code>respR</code> has a couple of minor advantages; the <code>respR</code> output is more informative, clearly stating the input and output units; and a “fuzzy” string matching algorithm is used to automatically recognise variations in base units, allowing natural, intuitive input, e.g.<code>"ml/s"</code>, <code>"mL/sec"</code>, <code>"milliliter/s"</code>, and <code>"millilitre/second"</code> are all equally identified as <code>mL/s</code>.</p>
<p>Overall however, in this small overlap in functionality the packages essentially perform identically.</p>
</div>
<div id="respr-and-rmr" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-rmr" class="anchor"></a><code>respR</code> and <code>rMR</code>
</h2>
<p>The <a href="https://cran.r-project.org/web/packages/rMR/index.html">rMR</a> package by Tyler L. Moulton focuses specifically on analysis of data from Loligo Systems hardware (i.e. Witrox probes), and generally on intermittent-flow, fish respirometry. We should note that as of writing (Sep 2018) this package has not been updated in nearly 2 years.</p>
<p>There are several areas of functionality where <code>rMR</code> and <code>respR</code> overlap:</p>
<div id="importing-raw-data" class="section level4">
<h4 class="hasAnchor">
<a href="#importing-raw-data" class="anchor"></a>Importing raw data</h4>
<p><code>rMR</code> allows importing of raw Witrox data files. <code>respR</code> also has this functionality in the <code>import_data</code> function, which as well as Witrox, supports several other systems. Here is typical code from each to do this. The example file and import code (slightly adapted) are taken from the <code>rMR</code> <a href="https://github.com/tyler-l-moulton/rMR">Github</a> repo and README file found there.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">## rMR Import</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>columns_to_import &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Date.time"</span>, <span class="st">"times"</span>, <span class="st">"Bar.Pressure.hpa"</span>, <span class="st">"Phase"</span>, <span class="st">"temp.C"</span>, </span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="st">"DO.mgL"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a>fish_rmr &lt;-<span class="st"> </span><span class="kw">get.witrox.data</span>(<span class="st">"fishMR.txt"</span>, <span class="dt">lines.skip =</span> <span class="dv">10</span>, <span class="dt">delimit =</span> <span class="st">"tab"</span>, <span class="dt">choose.names =</span> <span class="ot">TRUE</span>, </span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="dt">chosen.names =</span> columns_to_import, <span class="dt">format =</span> <span class="st">"%d/%m/%Y %I:%M:%S %p"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">## respR Import</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>fish_respr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/import_file.html">import_file</a></span>(<span class="st">"fishMR.txt"</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; Loligo AutoResp/Witrox file detected</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(fish_rmr)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt;               Date.time      times Bar.Pressure.hpa Phase temp.C DO.mgL</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; 1 02/07/2015 3:57:59 PM 3518711879             1013 29.87  23.49  7.852</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; 2 02/07/2015 3:58:00 PM 3518711880             1013 29.88  23.43  7.864</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; 3 02/07/2015 3:58:01 PM 3518711881             1013 29.88  23.43  7.864</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; 4 02/07/2015 3:58:02 PM 3518711882             1013 29.90  23.42  7.853</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; 5 02/07/2015 3:58:03 PM 3518711883             1013 29.87  23.46  7.862</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; 6 02/07/2015 3:58:04 PM 3518711884             1013 29.87  23.48  7.856</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;              std.time</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; 1 2015-07-02 15:57:59</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; 2 2015-07-02 15:58:00</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; 3 2015-07-02 15:58:01</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt; 4 2015-07-02 15:58:02</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; 5 2015-07-02 15:58:03</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; 6 2015-07-02 15:58:04</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(fish_respr)</span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt;                 DateTime Timestampcode Barometric_pressurehPa CH1phaserU</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt; 1: 02/07/2015 3:57:59 PM    3518711879                   1013      29.87</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#&gt; 2: 02/07/2015 3:58:00 PM    3518711880                   1013      29.88</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt; 3: 02/07/2015 3:58:01 PM    3518711881                   1013      29.88</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co">#&gt; 4: 02/07/2015 3:58:02 PM    3518711882                   1013      29.90</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="co">#&gt; 5: 02/07/2015 3:58:03 PM    3518711883                   1013      29.87</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#&gt; 6: 02/07/2015 3:58:04 PM    3518711884                   1013      29.87</span></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="co">#&gt;    CH1tempC CH1O2mg/L</span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">#&gt; 1:    23.49     7.852</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="co">#&gt; 2:    23.43     7.864</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co">#&gt; 3:    23.43     7.864</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="co">#&gt; 4:    23.42     7.853</span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co">#&gt; 5:    23.46     7.862</span></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="co">#&gt; 6:    23.48     7.856</span></span></code></pre></div>
<p>These both appear to perform well, on this file at least. The resulting data frames are similar, containing all the relevant data, although <code>respR</code> adds a numeric <code>time</code> column, which we find is easier to use in further analyses.</p>
<p>However, in our testing we found that while the <code>rMR</code> import function worked with this example, and a few other files we tried, many files we were unable to import using <code>rMR</code> for reasons we were unable to diagnose. Likely, some of the inputs were not correctly set, but error messages and documentation were of little help in solving these problems. This would likely be a significant barrier to entry for novice R users, and even those more advanced. Clearly the <code>respR</code> import function is easier to use; it requires only a single input. It relies on pattern matching to recognise the system the file comes from, and other data such as the time-date format. The <code>get.witrox.data</code> function has however an advantage, in that you can specify the columns to be imported.</p>
<p>While it is likely the <code>respR</code> <code>import_data()</code> function may fail on occasion, and more testing is needed, it appears to perform better for Witrox files, as well as supporting other systems. As always, we encourage users to <a href="mailto:nicholascarey@gmail.com">send us</a> raw data files (from all systems) to test, particularly ones they have problems with.</p>
</div>
<div id="conversion" class="section level4">
<h4 class="hasAnchor">
<a href="#conversion" class="anchor"></a>Conversion</h4>
<p>As with <code>respR</code> and <code>respirometry</code>, <code>rMR</code> also has an O2 unit conversion function <code>DO.unit.convert</code>. Briefly, this function appears to perform correctly, though only has support for a three units (mg/L, partial pressure, or percent O2), compared to around 16 in <code>respR</code>.</p>
</div>
<div id="pcrit" class="section level4">
<h4 class="hasAnchor">
<a href="#pcrit" class="anchor"></a>P<sub>Crit</sub>
</h4>
<p><code>rMR</code> implements a PCrit calculation based on the ‘broken-stick’ methods of Yeager and Ultsch (1989). See the P<sub>Crit</sub> vignette (<a href="https://januarharianto.github.io/respR/articles/pcrit.html">Pcrit analysis</a>) for comparison and further discussion of this.</p>
</div>
<div id="calculating-rates" class="section level4">
<h4 class="hasAnchor">
<a href="#calculating-rates" class="anchor"></a>Calculating rates</h4>
<p><code>MR.loops</code> is the workhorse function of <code>rMR</code> that fits linear regressions to respirometry data and uses the resulting slopes to calculate oxygen uptake rates. This function relies on manually specifying one or more regions over which to fit regressions. <code>respR</code> also allows this in the <code><a href="../reference/calc_rate.html">calc_rate()</a></code> function, so here we will compare the results of each on the same data. Again, we use data included in <code>rMR</code> and code adapted from the documentation.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">## rMR load data</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(fishMR)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co"># create time variable in POSIXct format ##</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>fishMR<span class="op">$</span>std.time &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span>(fishMR<span class="op">$</span>Date.time, <span class="dt">format =</span> <span class="st">"%d/%m/%Y %I:%M:%S %p"</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co"># set start and end of each data region to calculate rate over</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>starts &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2015-07-03 01:15:00"</span>, <span class="st">"2015-07-03 02:13:00"</span>, <span class="st">"2015-07-03 03:02:00"</span>, </span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="st">"2015-07-03 03:50:00"</span>, <span class="st">"2015-07-03 04:50:00"</span>)</span>
<span id="cb4-9"><a href="#cb4-9"></a>stops &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2015-07-03 01:44:00"</span>, <span class="st">"2015-07-03 02:35:30"</span>, <span class="st">"2015-07-03 03:25:00"</span>, <span class="st">"2015-07-03 04:16:00"</span>, </span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="st">"2015-07-03 05:12:00"</span>)</span>
<span id="cb4-11"><a href="#cb4-11"></a></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co"># calculate and convert rates</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>metR &lt;-<span class="st"> </span><span class="kw">MR.loops</span>(<span class="dt">data =</span> fishMR, <span class="dt">DO.var.name =</span> <span class="st">"DO.mgL"</span>, <span class="dt">start.idx =</span> starts, <span class="dt">time.units =</span> <span class="st">"hr"</span>, </span>
<span id="cb4-14"><a href="#cb4-14"></a>    <span class="dt">stop.idx =</span> stops, <span class="dt">time.var.name =</span> <span class="st">"std.time"</span>, <span class="dt">temp.C =</span> <span class="st">"temp.C"</span>, <span class="dt">elevation.m =</span> <span class="dv">1180</span>, </span>
<span id="cb4-15"><a href="#cb4-15"></a>    <span class="dt">bar.press =</span> <span class="ot">NULL</span>, <span class="dt">in.DO.meas =</span> <span class="st">"mg/L"</span>, <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">6</span>, <span class="dv">8</span>))</span></code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">## respR extract time and o2 column, and format to numeric time starting at zero</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>fishMR_respR &lt;-<span class="st"> </span>fishMR[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">6</span>)]</span>
<span id="cb5-4"><a href="#cb5-4"></a>fishMR_respR[, <span class="dv">1</span>] &lt;-<span class="st"> </span>fishMR_respR[, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>fishMR_respR[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co"># calculate rates (same regions, expressed as row numbers)</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>rates_respR &lt;-<span class="st"> </span><span class="kw"><a href="../reference/calc_rate.html">calc_rate</a></span>(fishMR_respR, <span class="dt">from =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">33400</span>, <span class="dv">36873</span>, <span class="dv">39807</span>, <span class="dv">42683</span>, <span class="dv">46277</span>), </span>
<span id="cb5-8"><a href="#cb5-8"></a>    <span class="dt">to =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">35136</span>, <span class="dv">38221</span>, <span class="dv">41186</span>, <span class="dv">44240</span>, <span class="dv">47596</span>), <span class="dt">by =</span> <span class="st">"row"</span>)</span></code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># convert rates</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>rates_respR_conv &lt;-<span class="st"> </span><span class="kw"><a href="../reference/convert_rate.html">convert_rate</a></span>(rates_respR, <span class="dt">time.unit =</span> <span class="st">"s"</span>, <span class="dt">o2.unit =</span> <span class="st">"mg/L"</span>, </span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="dt">volume =</span> <span class="dv">1</span>, <span class="dt">output.unit =</span> <span class="st">"mg/h"</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">## compare results - both in mg/h</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>rates_respR_conv<span class="op">$</span>output</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; [1] -3.205046 -3.161501 -2.870230 -2.945025 -2.900154</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>metR<span class="op">$</span>MR.summary<span class="op">$</span>MR</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt; [1] 3.205046 3.161501 2.870230 2.945025 2.900154</span></span></code></pre></div>
<p>As we can see the results are identical (in <code>respR</code> we chose to express rates as negatives because they represent a negative slope and depletion of O2). This is exactly what we would expect with the same inputs and using the same data regions because both functions are using the same underlying R code to fit the regressions.</p>
<p>Note, that as with <code>respR</code>, <code>rMR</code> also allows a constant background correction to be made to rates. In the interests of space, we have not shown this.</p>
</div>
<div id="benefits-of-respr-over-rmr" class="section level4">
<h4 class="hasAnchor">
<a href="#benefits-of-respr-over-rmr" class="anchor"></a>Benefits of <code>respR</code> over <code>rMR</code>
</h4>
<p>While we are obviously somewhat biased, we see clear benefits of using <code>respR</code> over <code>rMR</code>. These include, but are not limited to -</p>
<ul>
<li><p><strong>Imports multiple data types, as well as general R data structures (data frames, tibbles, data tables, etc.)</strong><br>
While use of other data types in <code>rMR</code> is possible, it is not intuitive, and time data must be in a specific, complex format. It does not allow the use of simple numeric time-elapsed values. Moreover, we entirely used the <code>rMR</code> data and examples in the above comparisons, because in our testing we had many problems importing our own data to <code>rMR</code>. We could not resolve many of these errors. We suspect the reliance on complex date-time formats and requiring the user to specify the precise structure of these was the cause of many of these problems.</p></li>
<li><p><strong>Allows statistically robust identification of linear regions (<code>auto_rate</code>), rather than solely manual selection</strong></p></li>
<li><p><strong>Allows specifying data regions in several ways (by O2 range, time, or row)</strong></p></li>
<li><p><strong>Insisting on use of numeric time elapsed, rather than POSIX formatted time-data (e.g. “2015-07-03 06:15:00 GMT”) is a clear usability advantage and reduces error</strong>.<br><code>respR</code> has a function for formatting POSIX data to numeric time-elapsed, after which the user need not concern themselves with date-time formats. Date-time and POSIX data are notoriously difficult to work with and error prone, and we have designed <code>respR</code> to avoid these when at all possible.</p></li>
<li><p><strong>Functions have minimal and intuitive inputs while maintaining full functionality, again reducing potential for error</strong></p></li>
<li><p><strong>Better visualisations of the data regions in full context of the dataset</strong></p></li>
</ul>
</div>
</div>
<div id="respr-and-fishresp" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-fishresp" class="anchor"></a><code>respR</code> and <code>FishResp</code>
</h2>
<p>The <a href="https://fishresp.org">FishResp</a> package has recently come out of beta with the release of version 1.0. A guide to usage of the package has also now been published in <a href="https://academic.oup.com/conphys/article/7/1/coz003/5307661"><em>Conservation Physiology</em></a>.</p>
<p>As with <code>rMR</code>, <code>FishResp</code> is focussed on processing data from intermittent-flow, swim tunnel experiments with many equally-spaced replicates, particularly from Loligo Systems equipment (although others are supported). As well as an <code>R</code> package, it has a <a href="https://fishresp.org">GUI version</a> for Mac, Windows and Linux. It is fully-featured, though highly specific towards this branch of respirometry.</p>
<p>It has functions for exploring and pre-processing data, but it is important to note the package only accepts input from some data sources. We provide here some comparison with overlaps with <code>respR</code> functionality where we have been able to use the same data.</p>
<div id="importing-raw-data-1" class="section level4">
<h4 class="hasAnchor">
<a href="#importing-raw-data-1" class="anchor"></a>Importing raw data</h4>
<p><code>FishResp</code> allows importing of raw data files from ’AutoResp’ (LoligoSystems), ’OxyView’ (PreSens), ’Pyro Oxygen Logger’ (PyroScience) and ’Qbox-Aqua’ (QubitSystems). However, as with <code>rMR</code> (see above) we struggled to import our own data files. We did import an AutoResp file, but this involved quite a lot of trial and error in setting the inputs (code below). However, we were not able to import a PreSens file. These additional formats apparently require additional files originating from the swim tunnel hardware to be imported alongside them, and processed through several functions. The AutoResp file (from a 1-channel, intermittent-flow, swim tunnel experiment on an anchovy) did however import successfully and plot the data:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">## create experimental metadata</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>info &lt;-<span class="st"> </span><span class="kw">input.info</span>(<span class="dt">ID =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"spec1"</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">Mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, </span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">Volume =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">DO.unit =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"mg/L"</span>))</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">## import raw data file</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>SMR.raw &lt;-<span class="st"> </span><span class="kw">import.meas</span>(<span class="dt">file =</span> <span class="st">"anch01_raw.txt"</span>, <span class="dt">info.data =</span> info, <span class="dt">logger =</span> <span class="st">"AutoResp"</span>, </span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="dt">n.chamber =</span> <span class="dv">8</span>, <span class="dt">date.format =</span> <span class="st">"DMY"</span>, <span class="dt">start.measure =</span> <span class="st">"10:10:00"</span>, <span class="dt">stop.measure =</span> <span class="st">"16:00:00"</span>, </span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="dt">plot.temperature =</span> F, <span class="dt">plot.oxygen =</span> F)</span></code></pre></div>
<p><img src="../../../Github%20repositories/respRsite/vignettes/anch_fishresp.png" width="700px"></p>
<p>We can’t compare the importing functionality of <code>FishResp</code> with <code>respR</code>, as we do not yet support direct importing of AutoResp files (this is planned, and currently they can easily be imported using other methods such as <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> and analysed in <code>respR</code>).</p>
<p>It should be noted the importing of raw data files in <code>FishResp</code> is <strong>obligatory</strong>: it is not possible to use regular <code>R</code> data structures such as data frames or vectors in the package. Importing the raw data files from the supported hardware and software platforms centred around intermittent-flow, swim tunnel respirometry is a compulsory step to format the data to a structure that the functions will understand. <code>respR</code> does not have this restriction and allows a range of data structures to be used in <em>all</em> functions, allowing all variations in experimental type or data to be analysed.</p>
</div>
<div id="calculating-rates-1" class="section level4">
<h4 class="hasAnchor">
<a href="#calculating-rates-1" class="anchor"></a>Calculating rates</h4>
<p>We cannot analyse the above experimental data in <code>FishResp</code> because a limitation of <code>FishResp</code> is that it apparently assumes replicates occur at regular intervals. This is true in some intermittent-flow respirometry experiments, but certainly not all. Experimental measurement periods and flushes are often triggered manually or done at irregular intervals. There is no clear way that we can see to accommodate these data in <code>FishResp</code>.</p>
<p>Therefore, we use here data included in <code>FishResp</code> that has already been imported and prepared in various ways, and the code is mostly taken from the documentation. We will use these data to compare the outputs of <code>FishResp</code> to <code>respR</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">## FishResp Analysis</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">## load data</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(SMR.raw)  <span class="co"># raw data</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(info)  <span class="co"># experiment metadata</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(pre)  <span class="co"># background rate - already processed and calculated</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">## apply background</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>SMR.clean &lt;-<span class="st"> </span><span class="kw">correct.meas</span>(<span class="dt">info.data =</span> info, <span class="dt">pre.data =</span> pre, <span class="dt">meas.data =</span> SMR.raw, </span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="dt">method =</span> <span class="st">"pre.test"</span>)</span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">## calculate slopes</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>SMR.slope &lt;-<span class="st"> </span><span class="kw">extract.slope</span>(SMR.clean, <span class="dt">method =</span> <span class="st">"all"</span>, <span class="dt">n.slope =</span> <span class="dv">3</span>, <span class="dt">r2 =</span> <span class="fl">0.95</span>, <span class="dt">length =</span> <span class="dv">1200</span>)</span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">## convert</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>SMR &lt;-<span class="st"> </span><span class="kw">calculate.MR</span>(SMR.slope, <span class="dt">density =</span> <span class="dv">1000</span>, <span class="dt">plot.BR =</span> F, <span class="dt">plot.MR.abs =</span> F, <span class="dt">plot.MR.mass =</span> F)</span>
<span id="cb8-17"><a href="#cb8-17"></a></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">## reorder - for comparison with respR results</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>smr_all &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(SMR, Ind, Phase)</span></code></pre></div>
<p>Now the <code>respR</code> analysis of the same data (though only a single channel), using the same inputs. We use regular R data selection syntax to extract rates from multiple even-spaced data regions (here spaced at every 1200 rows).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">## respR Analysis</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">## rearrange background data</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>bg &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(pre[<span class="dv">1</span><span class="op">:</span><span class="dv">1200</span>, <span class="dv">3</span>], pre[<span class="dv">1</span><span class="op">:</span><span class="dv">1200</span>, <span class="dv">6</span>])</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">## calculate bg rate</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>bg_r &lt;-<span class="st"> </span><span class="kw"><a href="../reference/calc_rate.bg.html">calc_rate.bg</a></span>(bg, <span class="dt">time =</span> <span class="dv">1</span>, <span class="dt">oxygen =</span> <span class="dv">2</span>, <span class="dt">plot =</span> F)</span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; `data.frame` input detected</span></span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">## Extract specimen 1 data</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>spec1 &lt;-<span class="st"> </span>SMR.raw[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">13</span>, <span class="dv">4</span>)]</span>
<span id="cb9-12"><a href="#cb9-12"></a></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">## calculate rates for each replicate</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>spec1_r &lt;-<span class="st"> </span><span class="kw"><a href="../reference/calc_rate.html">calc_rate</a></span>(spec1, <span class="dt">from =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1</span>, <span class="dv">18001</span>, <span class="dv">1200</span>), <span class="dt">to =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1200</span>, <span class="dv">19200</span>, <span class="dv">1200</span>), </span>
<span id="cb9-15"><a href="#cb9-15"></a>    <span class="dt">by =</span> <span class="st">"row"</span>)</span></code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">## adjust for background</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>spec1_r_adj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/adjust_rate.html">adjust_rate</a></span>(spec1_r, bg_r)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#&gt; </span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt; Rate adjustments applied. Use print() command for more info.</span></span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">## convert.  NB - we use effective volume, that is volume of respirometer minus</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">## volume of specimen.  FishResp calculates this internally</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>spec1_rates &lt;-<span class="st"> </span><span class="kw"><a href="../reference/convert_rate.html">convert_rate</a></span>(spec1_r_adj, <span class="dt">time.unit =</span> <span class="st">"s"</span>, <span class="dt">o2.unit =</span> <span class="st">"mg/L"</span>, <span class="dt">output.unit =</span> <span class="st">"mg/h/kg"</span>, </span>
<span id="cb10-10"><a href="#cb10-10"></a>    <span class="dt">mass =</span> <span class="fl">0.00186</span>, <span class="dt">volume =</span> <span class="fl">0.24814</span>)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">## Compare results - both in mg/h/kg</span></span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># FishResp</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(smr_all<span class="op">$</span>MR.mass[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>], <span class="dv">1</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">#&gt;  [1] 423.4 456.4 402.6 414.7 483.9 431.4 555.1 393.1 549.7 453.7 396.4 430.4</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">#&gt; [13] 449.0 609.5 400.9 388.6</span></span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co"># respR</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="op">-</span><span class="dv">1</span> <span class="op">*</span><span class="st"> </span>spec1_rates<span class="op">$</span>output, <span class="dv">1</span>)</span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">#&gt;  [1] 423.4 456.4 402.6 414.7 483.9 431.4 555.1 393.1 549.7 453.7 396.4 430.4</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co">#&gt; [13] 449.0 609.5 400.9 388.6</span></span></code></pre></div>
<p>As we can see the rates calculated by both packages are identical. As with <code>rMR</code>, this is exactly what we would expect as we are manually selecting the same data regions and user underlying R code to fit the linear regressions.</p>
</div>
<div id="options-in-fishresp" class="section level4">
<h4 class="hasAnchor">
<a href="#options-in-fishresp" class="anchor"></a>Options in FishResp</h4>
<p><code>FishResp</code> has options to modify the start and end of the data regions over which regressions are fit to determine oxygen uptake rate, by modifying the ‘wait’ and ‘measure’ phases, and using the <code>length</code> operator. However these phases are apparently applied equally to all replicates. As mentioned above, not all intermittent-flow respirometry experiments adhere to a rigid structure; there is no easy way of fitting regressions of different length over different replicates. <code>respR</code> has functionality to easily modify the starts and ends of data locations by time, O2 amount or row number; <code>FishResp</code>’s ability to do this is limited.</p>
<p>The <code>extract.slope</code> function is able to sort and select the rates from each replicate according to some basic criteria, for example outputting a selection of rates ordered by minimum or maximum, or based on R2 values or a percentile. <code>respR</code> does not have this option specifically, but it is straightforward from the results object via typical R selection syntax.</p>
</div>
<div id="benefits-of-respr-over-fishresp" class="section level4">
<h4 class="hasAnchor">
<a href="#benefits-of-respr-over-fishresp" class="anchor"></a>Benefits of respR over FishResp</h4>
<p>Overall <code>FishResp</code> is an excellent and useful package (and GUI application) if you are conducting a very specific type of respirometry experiment. Its focus is on processing large numbers of experimental replicates from a specific respirometry experiment type, using specific equipment. We have no doubt it works very well if you are conducting these types of experiment, but there is little to no flexibility to process other types of experiment or data sources.</p>
<p><code>FishResp</code> can process many experiments at once, both from different individuals and many replicates on individuals. Whether this is an advantage or disadvantage is debatable. Although it can be automated by anyone with basic R skills, <code>respR</code> was specifically designed to process single experiments at a time because we feel (and that this is general good practice in data analysis) that respirometry data should be thoroughly explored and visualised prior to any analyses. This may increase the time taken to conduct analyses, but we feel is safer and less likely to result in mistakes (and we would argue other time-saving advantages of <code>respR</code> ultimately outweigh this). <code>FishResp</code> has some data visualisation and exploration functions, but its focus seems to be the ability to process large numbers of experiments and replicates at once.</p>
<p>It does however have a couple of advantages over <code>respR</code> which may influence user choice on which to use:</p>
<ul>
<li><p><strong>A GUI (Graphical User Interface) Verison.</strong><br>
If you are not comfortable with code or prefer a user interface, <code>FishResp</code> has an application available that runs on Mac, Windows and Linux computers. We have no specific plans to create a GUI version of <code>respR</code>.</p></li>
<li><p><strong>Support for dynamic background correction.</strong><br>
Pre- and post-experiment background rates can be applied as average, linear or exponential interpolations. Dynamic background correction is not specifically supported in <code>respR</code> as yet, but this is planned. However, see <a href="https://januarharianto.github.io/respR/articles/intermittent2.html">Intermittent-flow respirometry: Complex example</a> for how it can be achieved at present.</p></li>
<li><p><strong>Support for raw data files from multiple systems at once.</strong> Again, we plan to support importing files from as many systems as we can get sample files for in <code>respR</code> in the near future. We are unsure of the benefits of supporting other data inputs that <code>FishResp</code> supports (e.g. hardware interfaces such as AquaResp), but are looking into it. Again though, <code>respR</code> is system agnostic; we know of no respirometry system that does not output data in a form that is easily imported into <code>R</code> using generic functions, and thus able to be analysed in <code>respR</code>.</p></li>
</ul>
<p>However, we feel <code>FishResp</code> has substantial drawbacks in comparison to <code>respR</code>:</p>
<ul>
<li>It is designed for intermittent-flow respirometry with set width of cycled replicates. There is no easy way to analyse closed, flowthrough or irregularly timed intermittent-flow respirometry data.<br>
</li>
<li>It supports importing data from some specific systems, but limited or no support for regular R data structures.</li>
<li>Complex inputs: as with <code>rMR</code>, complex date-time inputs are a particular source of frustration and potential error.<br>
</li>
<li>Manual selection of data regions only; there is no equivalent to the <code><a href="../reference/auto_rate.html">respR::auto_rate</a></code> function in <code>FishResp</code>
</li>
</ul>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The packages we examine here are the only other ones we know of that focus on processing respirometry data in R (but see <a href="https://januarharianto.github.io/respR/articles/auto_rate_comp.html">Comparative performance of auto_rate and LoLinR</a>). However, they have only a subset of the functionality contained in <code>respR</code>. Where they overlap in functionality, we feel <code>respR</code> is clearly easier to use and less prone to input errors or difficult to diagnose problems. <code>respR</code> has been designed to be as flexible as possible, accepting any and all respirometry data and experiment types.</p>
<p>The <code>rMR</code> and <code>FishResp</code> packages are, by contrast, focused entirely on intermittent-flow respirometry, with multiple, regularly-spaced experimental replicates. Both analyse these data adequately via manual specification of data regions over which to determine rates, but we would argue <code>respR</code> is equally capable of doing so (see <a href="https://januarharianto.github.io/respR/articles/intermittent2.html">Intermittent-flow respirometry: Complex example</a>). We are also working to make analysing the data from these experiments even easier.</p>
<p>In addition, the <code>respR</code> workflow for these experiments allows for use of <code><a href="../reference/auto_rate.html">auto_rate()</a></code>, which identifies linear regions of data in an objective, statistically robust manner, as opposed to relying on user selected regions.</p>
<p>To highlight a particular usability aspect, the packages we compare here rely on complex date-time formats for the time metric, which in our experiences often leads to substantial problems. There is no real reason why this should be the case; <code>respR</code> avoids this through use of numeric, time-elapsed data, and providing two functions to easily prepare data to this form (<a href="https://januarharianto.github.io/respR/articles/importing.html">Importing your data</a>). Overall, a major barrier to use of both these packages is getting data into them in a recognisable format. We had trouble importing data into both. <code>respR</code> is clearly ahead here, in that as well as allowing import of raw data files (though this is still in development and there are still systems not yet supported), it accepts almost any form of typical <code>R</code> data structure.</p>
<p>Investigators working with respirometry data are very much encouraged to explore <code>rMR</code> and <code>FishResp</code>. They may, because of their specific focuses, contain functionality that suits your particular analyses or workflows better than <code>respR</code>. However, <code>respR</code> has been designed to be highly flexible, adaptable, and universal. Even with only basic <code>R</code> skills it can be used for analysis of any aquatic respirometry data or experiment type we are aware of. It also has statistically robust, linear-detection functionality which is not present in these packages. We compare the performance of this functionality to the only other <code>R</code> package which has a similar purpose <a href="https://januarharianto.github.io/respR/articles/auto_rate_comp.html">here</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#respr-and-respirometry"><code>respR</code> and <code>respirometry</code></a></li>
      <li><a href="#respr-and-rmr"><code>respR</code> and <code>rMR</code></a></li>
      <li><a href="#respr-and-fishresp"><code>respR</code> and <code>FishResp</code></a></li>
      <li><a href="#summary">Summary</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Januar Harianto, Nicholas Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
